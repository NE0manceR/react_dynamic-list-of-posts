{"version":3,"sources":["components/PostsList/PostsList.tsx","components/NewCommentForm/NewCommentForm.tsx","api/api.ts","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["PostsList","posts","postByUserId","showPost","activePost","className","map","id","title","userId","type","onClick","NewCommentForm","postId","addComment","useState","name","email","body","newComment","setnewComment","inputValue","event","state","value","onSubmit","preventDefault","required","onChange","target","placeholder","BASE_URL","a","fetch","then","json","postsDetails","getPostComments","commentsByid","deleteComment","method","headers","JSON","stringify","PostDetails","post","comment","setComment","showComments","setShowComments","removeComment","com","useEffect","length","writeComment","App","allUsers","setAllUsers","allPosts","setAllPosts","setpostByuserId","postDetail","setPostDetail","showPostDetail","undefined","getPostDetails","getPosts","getUsers","user","live","filter","u","username","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.3aeaef08.chunk.js","sourcesContent":["import { Fragment } from 'react';\nimport './PostsList.scss';\n\ninterface Porps {\n  posts: Post[] | null,\n  postByUserId: number | null,\n  showPost: (id:number) => void,\n  activePost: number | undefined,\n}\n\nexport const PostsList: React.FC<Porps> = ({\n  posts, postByUserId, showPost, activePost,\n}) => {\n  return (\n    (\n      <div className=\"PostsList\">\n        <h2>Posts:</h2>\n\n        <ul className=\"PostsList__list\">\n          {posts?.map(({ id, title, userId }) => (\n            <Fragment key={id}>\n              {postByUserId === 0\n                ? (\n                  <li key={id} className=\"PostsList__item\">\n                    <div>\n                      <b>\n                        [User #\n                        {userId}\n                        ]:\n                        {' '}\n                      </b>\n                      {title}\n                    </div>\n                    <button\n                      type=\"button\"\n                      className={`PostsList__button button ${activePost === id && 'active_btn'}`}\n                      onClick={() => {\n                        showPost(id);\n                      }}\n                    >\n                      {activePost === id ? 'Close' : 'Open'}\n                    </button>\n                  </li>\n                )\n                : postByUserId === userId\n                && (\n                  <li key={id} className=\"PostsList__item\">\n                    <div>\n                      <b>\n                        [User #\n                        {userId}\n                        ]:\n                        {' '}\n                      </b>\n                      {title}\n                    </div>\n                    <button\n                      type=\"button\"\n                      className={`PostsList__button button ${activePost === id && 'active_btn'}`}\n                      onClick={() => {\n                        showPost(id);\n                      }}\n                    >\n                      {activePost === id ? 'Close' : 'Open'}\n                    </button>\n                  </li>\n                )}\n            </Fragment>\n          ))}\n        </ul>\n      </div>\n    )\n  );\n};\n","import React, { useState } from 'react';\nimport './NewCommentForm.scss';\n\ninterface Props {\n  postId: number,\n  addComment: (newComment:AddComment) => void\n}\n\nexport const NewCommentForm: React.FC<Props> = ({ postId, addComment }) => {\n  const [newComment, setnewComment] = useState<AddComment>(\n    {\n      postId,\n      name: '',\n      email: '',\n      body: '',\n    },\n  );\n\n  function inputValue(event:HTMLInputElement | HTMLTextAreaElement) {\n    setnewComment(state => ({ ...state, [event.name]: event.value }));\n  }\n\n  function sendComment(event:React.ChangeEvent<HTMLFormElement>) {\n    event.preventDefault();\n    addComment(newComment);\n    setnewComment({\n      postId,\n      name: '',\n      email: '',\n      body: '',\n    });\n  }\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={sendComment}\n    >\n      <div className=\"form-field\">\n        <input\n          required\n          onChange={(event) => {\n            inputValue(event.target);\n          }}\n          type=\"text\"\n          name=\"name\"\n          value={newComment.name}\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          required\n          onChange={(event) => {\n            inputValue(event.target);\n          }}\n          type=\"text\"\n          value={newComment.email}\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          required\n          onChange={(event) => {\n            inputValue(event.target);\n          }}\n          value={newComment.body}\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","/* eslint-disable no-console */\nexport const BASE_URL = 'https://mate.academy/students-api';\n\nexport async function getPosts():Promise<Post[]> {\n  return fetch(`${BASE_URL}/posts`)\n    .then(posts => posts.json());\n}\n\nexport async function getUsers():Promise<User[]> {\n  return fetch(`${BASE_URL}/users`)\n    .then(posts => posts.json());\n}\n\nexport async function getPostDetails(id:number):Promise<Post> {\n  return fetch(`${BASE_URL}/posts/${id}`)\n    .then(postsDetails => postsDetails.json());\n}\n\nexport async function getPostComments(id:number):Promise<Comment[]> {\n  return fetch(`${BASE_URL}/comments/?postId=${id}`)\n    .then(commentsByid => commentsByid.json());\n}\n\nexport function deleteComment(id:number) {\n  return fetch(`${BASE_URL}/comments/${id}`, { method: 'DELETE' });\n}\n\nexport function addComment(newComment: AddComment) {\n  return fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json; charset=utf-8',\n    },\n    body: JSON.stringify(\n      newComment,\n    ),\n  });\n}\n","import React, { useEffect, useState } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport { getPostComments, deleteComment, addComment } from '../../api/api';\n\ninterface Props {\n  post: Post,\n}\n\nexport const PostDetails: React.FC<Props> = ({ post }) => {\n  const [comment, setComment] = useState<Comment[] | []>([]);\n  const [showComments, setShowComments] = useState(false);\n\n  async function removeComment(id:number) {\n    await deleteComment(id);\n\n    getPostComments(post.id)\n      .then(com => {\n        setComment(com);\n      });\n  }\n\n  async function writeComment(newComment: AddComment) {\n    await addComment(newComment);\n\n    getPostComments(post.id)\n      .then(com => {\n        setComment(com);\n      });\n  }\n\n  useEffect(() => {\n    removeComment(post.id);\n  }, [post]);\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>\n        Post details:\n\n      </h2>\n      <section className=\"PostDetails__post\">\n        <p>{post.body}</p>\n      </section>\n\n      <section className=\"PostDetails__comments\">\n        {comment?.length !== 0 && (\n          <button\n            type=\"button\"\n            className=\"button\"\n            onClick={() => {\n              setShowComments(state => !state);\n            }}\n          >\n            {showComments ? ' Hide' : 'Show'}\n            {' '}\n            {comment.length}\n            {' '}\n            comments\n          </button>\n        )}\n\n        {showComments\n            && (\n              <ul className=\"PostDetails__list\">\n                {comment?.map(({ body, id }) => (\n                  <li key={id} className=\"PostDetails__list-item\">\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => {\n                        removeComment(id);\n                      }}\n                    >\n                      X\n                    </button>\n                    <p>{body}</p>\n                  </li>\n                ))}\n              </ul>\n            )}\n      </section>\n\n      <section>\n        <div className=\"PostDetails__form-wrapper\">\n          <NewCommentForm\n            addComment={(newComment: AddComment) => {\n              writeComment(newComment);\n            }}\n            postId={post.id}\n          />\n        </div>\n      </section>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getPosts, getUsers, getPostDetails } from './api/api';\n\nconst App: React.FC = () => {\n  const [allUsers, setAllUsers] = useState<User[] | null>(null);\n  const [allPosts, setAllPosts] = useState<Post[] | null>(null);\n  const [postByUserId, setpostByuserId] = useState<number | null>(0);\n  const [postDetail, setPostDetail] = useState<Post | null>(null);\n\n  function showPostDetail(id:number) {\n    if (postDetail?.id !== undefined && postDetail?.id === id) {\n      setPostDetail(null);\n    } else {\n      getPostDetails(id)\n        .then(post => setPostDetail(post));\n    }\n  }\n\n  useEffect(() => {\n    getPosts()\n      .then(posts => {\n        setAllPosts(posts);\n      });\n\n    getUsers()\n      .then(user => {\n        const live = user.filter(u => u.username !== null && u.username !== '');\n\n        setAllUsers(live);\n      });\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <div>\n          Select a user: &nbsp;\n          <select\n            className=\"App__user-selector\"\n            onChange={(event) => {\n              setpostByuserId(+event.target.value);\n            }}\n          >\n            <option value=\"0\">All users</option>\n            {allUsers?.map((user) => (\n              <option key={user.id} value={user.id}>{user.name}</option>\n            ))}\n          </select>\n        </div>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            postByUserId={postByUserId}\n            posts={allPosts}\n            activePost={postDetail?.id}\n            showPost={(id:number) => {\n              showPostDetail(id);\n            }}\n          />\n        </div>\n\n        { postDetail !== null && (\n          <div className=\"App__content\">\n            <PostDetails\n              post={postDetail}\n            />\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}